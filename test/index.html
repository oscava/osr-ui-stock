<html>
	<head>
		<title>
			OSR-UI-STOCK
		</title>
		<script src="../bower_components/osr-class/lib/index.js"></script>
		<script src="../lib/index.js"></script>
		<script src="./data.js"></script>
		<style>
			span { padding:20px; display:inline-block; background-color:#000;color:#fff;}
			.disshow{ background:rgba(0,0,0,.5);}
		</style>
	</head>
	<body>
		<canvas id="example" height="500" width="800" style="background-color:#000;">
			
		</canvas>
		<div>你可以尝试一下↑↓←→</div>
		<div>
			<span id="kline">Kline</span>
			<span id="open">Open</span>
			<span id="close">Close</span>
			<span id="high">High</span>
			<span id="low">Low</span>
			<span id="volume">Volume</span>
			<!-- <span id="time">Time</span> -->
		</div>
	</body>
	<script>
		var $ = function(id){
			return document.getElementById(id);
		}
		var fn = function(){
			window[this.id].isShow = window[this.id].isShow ? false: true;
			stage.draw(index);
			this.className = window[this.id].isShow ? "show" : "disshow";
		}
		var stage = new Stock(document.getElementById("example"));
		var mainscreen = stage.addScreen("main",{ width:800, height:400 },{ x:0,y:0});
		var volumescreen = stage.addScreen("volume",{ width:800, height:50},{ x:0, y:450},{min:0});
		//var timescreen = stage.addScreen("time");
		window.kline = mainscreen.addPrint("kline",{ bear: { color: "greenyellow" }, bull:{ color:"red"} ,weight:1 });
		window.low = mainscreen.addPrint("line",{ color:"#fff" },["low"]);
		window.high = mainscreen.addPrint("line",{ color:"red" },["high"]);
		window.close = mainscreen.addPrint("line",{ color:"blue" },["close"]);
		window.open = mainscreen.addPrint("line",{ color:"green" },["open"]);
		window.volume = volumescreen.addPrint("stick",{ bear:"green",bull:"red" , color:"#fff"},["volume"]);
		//window.time = timescreen.addPrint("line",{ color:"#fff" },["time"]);
		
		$("kline").addEventListener("click",fn);
		$("high").addEventListener("click",fn);
		$("low").addEventListener("click",fn);
		$("open").addEventListener("click",fn);
		$("close").addEventListener("click",fn);
		$("volume").addEventListener("click",fn);
		//$("time").addEventListener("click",fn);
		
		
		myData.stock.forEach(function(item,index){
			stage.addData(item);
		});
		var index = 0;
		stage.draw(index);
		document.body.addEventListener("keydown",function(e){
			if(39 === e.keyCode){
				index++;
			}else if(37 === e.keyCode){
				if(--index < 0 ){
					index = 0;
				}
				stage.draw(index);
			}else if(38 === e.keyCode){
				mainscreen.increaseItem();
				volumescreen.increaseItem();
			}else if(40 === e.keyCode){
				mainscreen.decreaseItem();
				volumescreen.decreaseItem();
			}
			stage.draw(index);
		})
	</script>
</html>